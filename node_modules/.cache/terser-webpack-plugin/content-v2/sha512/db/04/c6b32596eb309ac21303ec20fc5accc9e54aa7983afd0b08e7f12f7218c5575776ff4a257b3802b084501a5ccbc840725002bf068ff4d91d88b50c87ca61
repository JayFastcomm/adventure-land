{"code":"window.bots=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=21)}([function(t,e,r){\"use strict\";function n(t){return new Promise(e=>setTimeout(e,t))}function a(t=parent.character.items){const e=[];for(let r=0;r<t.length;r++)t[r]&&e.push({...t[r],index:r});return e}function o(t){for(let e=0;e<42;e++)if(parent.character.items[e]&&parent.character.items[e].name==t)return{...parent.character.items[e],index:e}}function i(t){const e=[];for(let r=0;r<42;r++)parent.character.items[r]&&parent.character.items[r].name==t&&e.push({...parent.character.items[r],index:r});return e}function s(t,e){const r=[];for(let n=0;n<42;n++)parent.character.items[n]&&parent.character.items[n].name==t&&parent.character.items[n].level==e&&r.push({...parent.character.items[n],index:n});return r}function c(t,e){let r=t.attack;return t.apiercing||(t.apiercing=0),t.rpiercing||(t.rpiercing=0),e.armor||(e.armor=0),!t.damage_type&&t.slots.mainhand&&(t.damage_type=G.items[t.slots.mainhand.name].damage),e[\"1hp\"]?[1,1]:(\"physical\"==t.damage_type?r*=damage_multiplier(e.armor-t.apiercing):\"magical\"==t.damage_type&&(r*=damage_multiplier(e.resistance-t.rpiercing)),[.9*r,1.1*r])}function p(t,e=!1){if(parent.next_skill&&parent.next_skill[t]){const r=parent.next_skill[t].getTime()-Date.now();return e?r+1:r<parent.character.ping?parent.character.ping:r+1}return parent.character.ping}function h(t=parent.character.items){for(let e=0;e<t.length;e++)if(!t[e])return!1;return!0}function u(){const t=new Set;for(const e of parent.party_list)t.add(parent.party[e].type);return t}function f(t){const e=G.skills[t].level;if(e&&e>parent.character.level)return!1;if(parent.character.stoned)return!1;if(parent.character.rip)return!1;const r=G.skills[t].wtype;if(r&&r!=G.items[parent.character.slots.mainhand.name].wtype)return!1;if(G.skills[t].slot)for(const e of G.skills[t].slot){if(!parent.character.slots[e[0]])return!1;if(parent.character.slots[e[0]].name!=e[1])return!1}if(G.skills[t].class){let e=!1;for(const r of G.skills[t].class)if(r==parent.character.ctype){e=!0;break}if(!e)return!1}let n=0;if(G.skills[t].mp?n=G.skills[t].mp:[\"attack\",\"heal\"].includes(t)&&(n=parent.character.mp_cost),parent.character.mp<n)return!1;if(void 0===parent.next_skill[t])return!0;const a=G.skills[t].share;return a?!parent.next_skill[a]||Date.now()>=parent.next_skill[a].getTime():Date.now()>=parent.next_skill[t].getTime()}function l({canAttackUsWithoutMoving:t,canKillInOneHit:e,canMoveTo:r,isAttacking:n,isAttackingParty:a,isAttackingUs:o,isCtype:i,isMonster:s,isMonsterType:p,isMoving:h,isNPC:u,isPartyMember:f,isPlayer:l,isRIP:d,isWithinDistance:m}){const g=[],y=is_pvp();for(const v in parent.entities){const _=parent.entities[v],x=distance(parent.character,_);!0===t&&_.range>x||(!1===t&&_.range<=x||!0===e&&c(parent.character,_)[0]>_.hp||!1===e&&c(parent.character,_)[0]<=_.hp||(!0!==r||can_move_to(_.real_x,_.real_y))&&(!1===r&&can_move_to(_.real_x,_.real_y)||(!0!==n||\"monster\"!=_.type||_.target)&&(!1===n&&\"monster\"==_.type&&_.target||(!0!==n||\"character\"!=_.type||_.target)&&(!0!==a||\"monster\"!=_.type||parent.party_list.includes(_.target))&&(!1===a&&\"monster\"==_.type&&parent.party_list.includes(_.target)||(!0!==a||\"character\"!=_.type||y)&&(!0===a&&\"character\"==_.type&&parent.party_list.includes(v)||!0===a&&\"Wizard\"==parent.character.name||!0===o&&\"monster\"==_.type&&_.target!=parent.character.name||!1===o&&\"monster\"==_.type&&_.target==parent.character.name||(!0!==o||\"character\"!=_.type||y)&&(!0===o&&\"character\"==_.type&&parent.party_list.includes(v)||!0===o&&\"Wizard\"==parent.character.name||(void 0===i||_.ctype)&&(void 0!==i&&_.ctype!=i||!0===s&&\"monster\"!=_.type||!1===s&&\"monster\"==_.type||(void 0===p||_.mtype)&&(void 0===p||p.includes(_.mtype))&&(!0!==h||_.moving)&&(!1===h&&_.moving||!0===u&&\"character\"!=_.type||(!0!==u||\"character\"!=_.type||_.npc)&&(!0!==f||parent.party_list.includes(v))&&(!1===f&&parent.party_list.includes(v)||!0===l&&\"character\"!=_.type||!0===l&&_.npc||(!0!==d||_.rip)&&(!1===d&&_.rip||void 0!==m&&x>m||g.push(_)))))))))))}return g}function d(){const t=new Set;for(const e in parent.entities){const r=parent.entities[e];r.mtype&&t.add(r.mtype)}return t}function m(t){const e=[];for(const r in G.maps){const n=G.maps[r];if(!n.instance)for(const a of n.monsters||[])if(a.type==t)if(a.boundary)e.push({map:r,x:(a.boundary[0]+a.boundary[2])/2,y:(a.boundary[1]+a.boundary[3])/2});else if(a.boundaries)for(const t of a.boundaries)e.push({map:t[0],x:(t[1]+t[3])/2,y:(t[2]+t[4])/2})}return e}function g(t){const e=m(t);return e[Math.trunc(Math.random()*e.length)]}r.d(e,\"m\",(function(){return n})),r.d(e,\"g\",(function(){return a})),r.d(e,\"b\",(function(){return o})),r.d(e,\"c\",(function(){return i})),r.d(e,\"d\",(function(){return s})),r.d(e,\"a\",(function(){return c})),r.d(e,\"e\",(function(){return p})),r.d(e,\"l\",(function(){return h})),r.d(e,\"h\",(function(){return u})),r.d(e,\"k\",(function(){return f})),r.d(e,\"f\",(function(){return l})),r.d(e,\"j\",(function(){return d})),r.d(e,\"i\",(function(){return g}))},function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return a})),r.d(e,\"c\",(function(){return o})),r.d(e,\"b\",(function(){return i}));var n=r(0);function a(t){if(\"bank\"!=parent.character.map){if(!Object(n.b)(\"computer\")){let t=!1;if(!G.maps[parent.character.map].npcs)return;for(const e of G.maps[parent.character.map].npcs.filter(t=>\"merchant\"==G.npcs[t.id].role))if(distance(parent.character,{x:e.position[0],y:e.position[1]})<350){t=!0;break}if(!t)return}for(const e of Object(n.g)())if(!e.p&&t[e.name]){if(e.level&&e.level>t[e.name])continue;e.q?sell(e.index,e.q):sell(e.index,1)}}}function o(t,e){const r=parent.entities[t];if(!r)return;if(distance(parent.character,r)>400)return;const a=new Set(e),o=Object(n.g)();o.sort((t,e)=>t.name<e.name?-1:t.name>e.name?1:t.level>e.level?-1:void 0);for(const e of o)a.has(e.name)?a.delete(e.name):e.q?send_item(t,e.index,e.q):send_item(t,e.index,1)}function i(t,e=0){if(parent.character.gold<=e)return;const r=parent.entities[t];r&&(distance(parent.character,r)>400||send_gold(t,parent.character.gold-e))}},function(t,e){function r(t,e){if(!(this instanceof r))return new r(t,e);if(Array.isArray(t)||(e=t,t=[]),e=e||{},this.data=t||[],this.length=this.data.length,this.compare=e.compare||a,this.setNodeId=e.setNodeId||n,this.length>0)for(var o=this.length>>1;o>=0;o--)this._down(o);if(e.setNodeId)for(o=0;o<this.length;++o)this.setNodeId(this.data[o],o)}function n(){}function a(t,e){return t-e}t.exports=r,r.prototype={push:function(t){this.data.push(t),this.setNodeId(t,this.length),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this.setNodeId(this.data[0],0),this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},updateItem:function(t){this._down(t),this._up(t)},_up:function(t){for(var e=this.data,r=this.compare,n=this.setNodeId,a=e[t];t>0;){var o=t-1>>1,i=e[o];if(r(a,i)>=0)break;e[t]=i,n(i,t),t=o}e[t]=a,n(a,t)},_down:function(t){for(var e=this.data,r=this.compare,n=this.length>>1,a=e[t],o=this.setNodeId;t<n;){var i=1+(t<<1),s=i+1,c=e[i];if(s<this.length&&r(e[s],c)<0&&(i=s,c=e[s]),r(c,a)>=0)break;e[t]=c,o(c,t),t=i}e[t]=a,o(a,t)}}},function(t,e){t.exports={l2:function(t,e){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)},l1:function(t,e){var r=t.x-e.x,n=t.y-e.y;return Math.abs(r)+Math.abs(n)}}},function(t,e){var r=[];\"function\"==typeof Object.freeze&&Object.freeze(r),t.exports={heuristic:function(){return 0},distance:function(){return 1},compareFScore:function(t,e){return t.fScore-e.fScore},NO_PATH:r,setHeapIndex:function(t,e){t.heapIndex=e},setH1:function(t,e){t.h1=e},setH2:function(t,e){t.h2=e},compareF1Score:function(t,e){return t.f1-e.f1},compareF2Score:function(t,e){return t.f2-e.f2}}},function(t,e){function r(t){this.node=t,this.parent=null,this.closed=!1,this.open=0,this.distanceToSource=Number.POSITIVE_INFINITY,this.fScore=Number.POSITIVE_INFINITY,this.heapIndex=-1}t.exports=function(){var t=0,e=[];return{createNewState:function(n){var a=e[t];a?(a.node=n,a.parent=null,a.closed=!1,a.open=0,a.distanceToSource=Number.POSITIVE_INFINITY,a.fScore=Number.POSITIVE_INFINITY,a.heapIndex=-1):(a=new r(n),e[t]=a);return t++,a},reset:function(){t=0}}}},function(t,e,r){t.exports=function(t){\"uniqueLinkId\"in(t=t||{})&&(console.warn(\"ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\\nUse `multigraph` option instead\\n\",\"\\n\",\"Note: there is also change in default behavior: From now on each graph\\nis considered to be not a multigraph by default (each edge is unique).\"),t.multigraph=t.uniqueLinkId);void 0===t.multigraph&&(t.multigraph=!1);if(\"function\"!=typeof Map)throw new Error(\"ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph\");var e=new Map,r=[],p={},h=0,u=t.multigraph?function(t,e,r){var n=c(t,e),a=p.hasOwnProperty(n);if(a||N(t,e)){a||(p[n]=0);var o=\"@\"+ ++p[n];n=c(t+o,e+o)}return new s(t,e,r,n)}:function(t,e,r){var n=c(t,e);return new s(t,e,r,n)},f=[],l=S,d=S,m=S,g=S,y={addNode:x,addLink:function(t,e,n){m();var a=b(t)||x(t),o=b(e)||x(e),s=u(t,e,n);r.push(s),i(a,s),t!==e&&i(o,s);return l(s,\"add\"),g(),s},removeLink:T,removeNode:w,getNode:b,getNodeCount:k,getLinkCount:I,getLinksCount:I,getNodesCount:k,getLinks:function(t){var e=b(t);return e?e.links:null},forEachNode:G,forEachLinkedNode:function(t,r,n){var a=b(t);if(a&&a.links&&\"function\"==typeof r)return n?function(t,r,n){for(var a=0;a<t.length;++a){var o=t[a];if(o.fromId===r&&n(e.get(o.toId),o))return!0}}(a.links,t,r):function(t,r,n){for(var a=0;a<t.length;++a){var o=t[a],i=o.fromId===r?o.toId:o.fromId;if(n(e.get(i),o))return!0}}(a.links,t,r)},forEachLink:function(t){var e,n;if(\"function\"==typeof t)for(e=0,n=r.length;e<n;++e)t(r[e])},beginUpdate:m,endUpdate:g,clear:function(){m(),G((function(t){w(t.id)})),g()},hasLink:N,hasNode:b,getLink:N};return n(y),function(){var t=y.on;y.on=function(){return y.beginUpdate=m=M,y.endUpdate=g=P,l=v,d=_,y.on=t,t.apply(y,arguments)}}(),y;function v(t,e){f.push({link:t,changeType:e})}function _(t,e){f.push({node:t,changeType:e})}function x(t,r){if(void 0===t)throw new Error(\"Invalid node identifier\");m();var n=b(t);return n?(n.data=r,d(n,\"update\")):(n=new o(t,r),d(n,\"add\")),e.set(t,n),g(),n}function b(t){return e.get(t)}function w(t){var r=b(t);if(!r)return!1;m();var n=r.links;if(n){r.links=null;for(var a=0;a<n.length;++a)T(n[a])}return e.delete(t),d(r,\"remove\"),g(),!0}function k(){return e.size}function I(){return r.length}function T(t){if(!t)return!1;var e=a(t,r);if(e<0)return!1;m(),r.splice(e,1);var n=b(t.fromId),o=b(t.toId);return n&&(e=a(t,n.links))>=0&&n.links.splice(e,1),o&&(e=a(t,o.links))>=0&&o.links.splice(e,1),l(t,\"remove\"),g(),!0}function N(t,e){var r,n=b(t);if(!n||!n.links)return null;for(r=0;r<n.links.length;++r){var a=n.links[r];if(a.fromId===t&&a.toId===e)return a}return null}function S(){}function M(){h+=1}function P(){0===(h-=1)&&f.length>0&&(y.fire(\"changed\",f),f.length=0)}function G(t){if(\"function\"!=typeof t)throw new Error(\"Function is expected to iterate over graph nodes. You passed \"+t);for(var r=e.values(),n=r.next();!n.done;){if(t(n.value))return!0;n=r.next()}}};var n=r(11);function a(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var r,n=e.length;for(r=0;r<n;r+=1)if(e[r]===t)return r;return-1}function o(t,e){this.id=t,this.links=null,this.data=e}function i(t,e){t.links?t.links.push(e):t.links=[e]}function s(t,e,r,n){this.fromId=t,this.toId=e,this.data=r,this.id=n}function c(t,e){return t.toString()+\"ðŸ‘‰ \"+e.toString()}},function(t,e,r){t.exports={aStar:r(12),aGreedy:r(13),nba:r(14)}},function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return n}));const n={bee:{priority:300},crab:{priority:100},goo:{priority:500},osnake:{priority:1},snake:{priority:1},squig:{priority:1},squigtoad:{priority:1}}},function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return n}));const n=\"goo\"},function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return b}));var n=r(0);function a(t,e){return\"string\"==typeof e&&/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/.test(e)?new Date(e):e}function o(){return`${parent.server_region}.${parent.server_identifier}`}function i(){return JSON.parse(localStorage.getItem(o()+\"_monsters\"),a)||{}}function s(t){localStorage.setItem(o()+\"_monsters\",JSON.stringify(t))}function c(){return JSON.parse(localStorage.getItem(o()+\"_npcs\"),a)||{}}function p(t){localStorage.setItem(o()+\"_npcs\",JSON.stringify(t))}function h(){return JSON.parse(localStorage.getItem(o()+\"_party\"),a)||{}}function u(t){localStorage.setItem(o()+\"_party\",JSON.stringify(t))}function f(){return JSON.parse(localStorage.getItem(o()+\"_players\"),a)||{}}function l(t){localStorage.setItem(o()+\"_players\",JSON.stringify(t))}var d=r(6),m=r.n(d),g=r(7),y=r.n(g);const v=750*parent.character.speed/1e3,_=2e3*parent.character.speed/1e3;class x{constructor(){this.grids={},this.graph=m()({multigraph:!0}),this.pathfinder=y.a.aStar(this.graph,{distance:(t,e,r)=>r.data&&\"transport\"==r.data.type?v:r.data&&\"town\"==r.data.type?_:t.data.map==e.data.map?Math.sqrt((t.data.x-e.data.x)**2+(t.data.y-e.data.y)**2):void 0,oriented:!0})}static async getInstance(){return this.instance||(this.instance=new x,await this.instance.prepare()),this.instance}static cleanPosition(t){return{map:t.map,x:void 0!==t.real_x?t.real_x:t.x,y:void 0!==t.real_y?t.real_y:t.y}}reset(){this.searchStartTime=void 0,this.searchFinishTime=void 0,this.moveStartTime=void 0,this.moveFinishTime=void 0}stop(){this.reset(),parent.character.moving&&stop(),parent.character.c.town&&stop(\"town\")}isMoving(){return null==this.moveFinishTime&&null!=this.searchStartTime}wasCancelled(t){return!this.searchStartTime||t<this.searchStartTime}canMove(t,e){if(t.map!=e.map)return console.error(`Don't use this function across maps. You tried to check canMove from ${t.map} to ${e.map}.`),!1;const r=this.grids[t.map],n=Math.trunc(e.x)-Math.trunc(t.x),a=Math.trunc(e.y)-Math.trunc(t.y),o=Math.abs(n),i=Math.abs(a),s=n>0?1:-1,c=a>0?1:-1;let p=Math.trunc(t.x)-G.geometry[t.map].min_x,h=Math.trunc(t.y)-G.geometry[t.map].min_y;for(let t=0,e=0;t<o||e<i;)if((.5+t)/o==(.5+e)/i?(p+=s,h+=c,t++,e++):(.5+t)/o<(.5+e)/i?(p+=s,t++):(h+=c,e++),3!==r[h][p])return!1;return!0}async addToGraph(t){if(this.grids[t])return;G.maps[t]||console.error(t+\" is not a valid map.\");const e=G.geometry[t].max_x-G.geometry[t].min_x,r=G.geometry[t].max_y-G.geometry[t].min_y,n=Array(r);for(let t=0;t<r;t++){n[t]=[];for(let r=0;r<e;r++)n[t][r]=1}for(const a of G.geometry[t].y_lines)for(let o=Math.max(0,a[0]-G.geometry[t].min_y-parent.character.base.vn-1);o<a[0]-G.geometry[t].min_y+parent.character.base.v+1&&o<r;o++)for(let r=Math.max(0,a[1]-G.geometry[t].min_x-parent.character.base.h-1);r<a[2]-G.geometry[t].min_x+parent.character.base.h+1&&r<e;r++)n[o][r]=2;for(const a of G.geometry[t].x_lines)for(let o=Math.max(0,a[0]-G.geometry[t].min_x-parent.character.base.h-1);o<a[0]-G.geometry[t].min_x+parent.character.base.h+1&&o<e;o++)for(let e=Math.max(0,a[1]-G.geometry[t].min_y-parent.character.base.vn-1);e<a[2]-G.geometry[t].min_y+parent.character.base.v+1&&e<r;e++)n[e][o]=2;for(const a of G.maps[t].spawns){let o=Math.trunc(a[0])-G.geometry[t].min_x,i=Math.trunc(a[1])-G.geometry[t].min_y;if(3===n[i][o])continue;const s=[[i,o]];for(;s.length;){[i,o]=s.pop();let t=o;for(;t>=0&&1==n[i][t];)t--;t++;let a=0,c=0;for(;t<e&&1==n[i][t];)n[i][t]=3,!a&&i>0&&1==n[i-1][t]?(s.push([i-1,t]),a=1):a&&i>0&&1!=n[i-1][t]&&(a=0),!c&&i<r-1&&1==n[i+1][t]?(s.push([i+1,t]),c=1):c&&i<r-1&&1!=n[i+1][t]&&(c=0),t++}}function a(t,e,r){return`${t}:${Math.trunc(e)},${Math.trunc(r)}`}function o(t,e,r){return{map:t,x:Math.trunc(e),y:Math.trunc(r)}}function i(e,r){let n={x:-99999,y:-99999,distance:99999};for(const a of G.maps[t].spawns){const t=Math.sqrt((a[0]-e)**2+(a[1]-r)**2);t<n.distance&&(n={x:a[0],y:a[1],distance:t})}return n}this.grids[t]=n;{const s=[];for(let i=1;i<r-1;i++)for(let r=1;r<e-1;r++){if(3!=n[i][r])continue;const e=a(t,r+G.geometry[t].min_x,i+G.geometry[t].min_y);if(this.graph.hasNode(e)){s.push(this.graph.getNode(e));continue}const c=o(t,r+G.geometry[t].min_x,i+G.geometry[t].min_y);(2==n[i-1][r-1]&&2==n[i-1][r]&&2==n[i-1][r+1]&&2==n[i][r-1]&&2==n[i+1][r-1]||2==n[i-1][r-1]&&2==n[i-1][r]&&2==n[i-1][r+1]&&2==n[i][r+1]&&2==n[i+1][r+1]||2==n[i-1][r+1]&&2==n[i][r+1]&&2==n[i+1][r-1]&&2==n[i+1][r]&&2==n[i+1][r+1]||2==n[i-1][r-1]&&2==n[i][r-1]&&2==n[i+1][r-1]&&2==n[i+1][r]&&2==n[i+1][r+1]||2==n[i-1][r-1]&&3==n[i-1][r]&&3==n[i][r-1]||3==n[i-1][r]&&2==n[i-1][r+1]&&3==n[i][r+1]||3==n[i][r+1]&&3==n[i+1][r]&&2==n[i+1][r+1]||3==n[i][r-1]&&2==n[i+1][r-1]&&3==n[i+1][r])&&s.push(this.graph.addNode(e,c))}for(const e of G.maps[t].npcs){if(\"transporter\"!=e.id)continue;const r=i(e.position[0],e.position[1]),n=a(t,r.x,r.y);if(this.graph.hasNode(n))s.push(this.graph.getNode(n));else{const e=o(t,r.x,r.y);s.push(this.graph.addNode(n,e))}for(const t in G.npcs.transporter.places){const e=G.npcs.transporter.places[t],r=G.maps[t].spawns[e],i=a(t,r[0],r[1]);if(!this.graph.hasNode(i)){const e=o(t,r[0],r[1]);this.graph.addNode(i,e)}if(!this.graph.hasLink(n,i)){const t={type:\"transport\",spawn:e};this.graph.addLink(n,i,t)}}}for(const e of G.maps[t].doors){if(e[7]||e[8])continue;const r=G.maps[t].spawns[e[6]],n=a(t,r[0],r[1]);if(this.graph.hasNode(n))s.push(this.graph.getNode(n));else{const e=o(t,r[0],r[1]);s.push(this.graph.addNode(n,e))}const i=G.maps[e[4]].spawns[e[5]],c=a(e[4],i[0],i[1]);if(!this.graph.hasNode(c)){const t=o(e[4],i[0],i[1]);this.graph.addNode(c,t)}if(!this.graph.hasLink(n,c)){const t={type:\"transport\",spawn:e[5]};this.graph.addLink(n,c,t)}}for(const e of G.maps[t].spawns){const r=a(t,e[0],e[1]);if(!this.graph.hasNode(r)){const n=o(t,e[0],e[1]);s.push(this.graph.addNode(r,n))}}for(let t=0;t<s.length;t++)for(let e=t+1;e<s.length;e++){const r=s[t],n=s[e];this.canMove(r.data,n.data)&&(this.graph.addLink(r.id,n.id),this.graph.addLink(n.id,r.id))}}}async prepare(t=\"main\"){const e=[t];for(let t=0;t<e.length;t++){const r=e[t];for(const t of G.maps[r].doors){const r=t[4];e.includes(r)||e.push(t[4])}}for(const t in G.npcs.transporter.places){const r=t;e.includes(r)||e.push(r)}for(const t of e)await this.addToGraph(t),await new Promise(t=>setTimeout(t,50))}getGraphInfo(){console.info(\"Graph information ----------\"),console.info(\"# Nodes: \"+this.graph.getNodeCount()),console.info(\"# Links: \"+this.graph.getLinkCount()),console.info(\"----------------------------\")}getPath(t){let e,r,n=Number.MAX_VALUE,a=Number.MAX_VALUE;this.graph.forEachNode(o=>{if(o.data||(console.error(\"NO DATA!?\"),console.error(o)),o.data.map==parent.character.map){const t=Math.sqrt((o.data.x-parent.character.real_x)**2+(o.data.y-parent.character.real_y)**2);t<n&&can_move_to(o.data.x,o.data.y)&&(n=t,e=o.id)}if(o.data.map==t.map){const e=Math.sqrt((o.data.x-t.x)**2+(o.data.y-t.y)**2);e<a&&(a=e,r=o.id)}});const o=this.pathfinder.find(e,r);if(0==o.length)return void console.error(\"could not find a path\");const i=[];o[o.length-1].data.x==parent.character.real_x&&o[o.length-1].data.y==parent.character.real_y||i.push([x.cleanPosition(parent.character),o[o.length-1].data,void 0]);for(let t=o.length-1;t>0;t--){const e=o[t],r=o[t-1],n=this.graph.getLink(e.id,r.id);i.push([e.data,r.data,n.data])}o[0].data.x==t.x&&o[0].data.y==t.y||i.push([o[0].data,t,void 0]);const s=x.cleanPosition(parent.character);let c=0;for(let t=1;t<i.length;t++){const e=i[t][1],r=i[t][2];if(s.map!==e.map)break;if(r)break;this.canMove(s,e)&&(c=t)}c>0&&(i.splice(0,c),i[0][0]=s),c=i.length-1;for(let e=i.length-2;e>0;e--){const r=i[e][0],n=i[e][1];if(i[e][2])break;if(n.map!=t.map)break;this.canMove(r,t)&&(c=e)}return c<i.length-1&&(i.splice(c+1),i[i.length-1][1]=t),i.length>1&&void 0===i[0][2]&&i[1][2]&&\"town\"==i[1][2].type&&i[0][0].map==i[1][0].map&&i.shift(),i}async move(t,e=0){if(this.reset(),distance(parent.character,t)<=e)return;const r=x.cleanPosition(parent.character),n=x.cleanPosition(t);function a(t){if(0==e)return n;const r=Math.sqrt((t.y-n.y)**2+(t.x-n.x)**2);if(r<e)return t;const a=Math.atan2(t.y-n.y,t.x-n.x);return r>e?{map:n.map,x:n.x+Math.cos(a)*e,y:n.y+Math.sin(a)*e}:void 0}if(r.map==n.map){const t=a(n);if(can_move_to(t.x,t.y))return move(t.x,t.y)}const o=Date.now();this.searchStartTime=o;const i=this.getPath(n);if(this.searchFinishTime=Date.now(),!i)return Promise.reject(`We could not find a path from [${r.map},${r.x},${r.y}] to [${n.map},${n.x},${n.y}] in ${this.searchFinishTime-this.searchStartTime}ms`);async function s(t,e){if(e)return\"transport\"==e.type?(transport(t.map,e.spawn),void await new Promise(t=>setTimeout(t,Math.max(...parent.pings)+750))):\"blink\"==e.type?(use_skill(\"blink\",[t.x,t.y]),void await new Promise(t=>setTimeout(t,Math.max(...parent.pings)+750))):void 0;await Promise.race([move(t.x,t.y),new Promise(t=>setTimeout(t,1e4))])}this.moveStartTime=Date.now();for(let r=0;r<i.length;){const n=i[r][0];let c;c=r==i.length-1?a(i[r][1]):i[r][1];let p=i[r][2],h=Math.sqrt((Math.trunc(c.x)-Math.trunc(parent.character.real_x))**2+(Math.trunc(c.y)-Math.trunc(parent.character.real_y))**2);if(this.wasCancelled(o))return Promise.reject(\"cancelled\");if(h<1)r++;else if(parent.character.c.town||parent.character.moving)await new Promise(t=>setTimeout(t,50));else{if(!p&&!can_move_to(c.x,c.y)||parent.character.map!==n.map)return console.warn(\"NGraphMove movement failed. We're going to teleport to town and try again.\"),use_skill(\"town\"),await new Promise(t=>setTimeout(t,Math.max(...parent.pings)+2e3)),this.move(t,e);if(can_use(\"blink\")&&parent.character.mp>G.skills.blink.mp){let t=r;for(;t<i.length&&(h+=Math.sqrt((i[t][1].x-i[t][0].x)**2+(i[t][1].y-i[t][0].y)**2),i[t][0].map==i[t][1].map);t++);h>_&&(t==i.length?(c=i[t-1][1],r=t-2):(c=i[t][0],r=t-1),p={type:\"blink\"})}await s(c,p)}}this.moveFinishTime=Date.now()}}class b{constructor(){this.mainTarget=\"goo\",this.itemsToKeep=[\"computer\",\"tracker\",\"goldbooster\",\"luckbooster\",\"xpbooster\",\"hpot1\",\"mpot1\",\"jacko\",\"lantern\",\"orbg\",\"test_orb\"],this.itemsToSell={shoes:2,pants:2,coat:2,helmet:2,gloves:2,cclaw:2,hpamulet:1,hpbelt:1,ringsj:1,vitearring:1,vitring:1},this.itemsToDismantle={},this.itemsToExchange=new Set([\"5bucks\",\"gem0\",\"gem1\",\"seashell\",\"leather\",\"candycane\",\"mistletoe\",\"ornament\",\"candy0\",\"candy1\",\"redenvelopev3\",\"basketofeggs\",\"armorbox\",\"bugbountybox\",\"gift0\",\"gift1\",\"mysterybox\",\"weaponbox\",\"xbox\"]),this.itemsToBuy=new Set([...this.itemsToExchange,\"dexbelt\",\"intbelt\",\"strbelt\",\"ctristone\",\"dexring\",\"intring\",\"ringofluck\",\"strring\",\"suckerpunch\",\"tristone\",\"dexearring\",\"intearring\",\"lostearring\",\"strearring\",\"amuletofm\",\"dexamulet\",\"intamulet\",\"snring\",\"stramulet\",\"t2dexamulet\",\"t2intamulet\",\"t2stramulet\",\"charmer\",\"ftrinket\",\"jacko\",\"orbg\",\"orbofdex\",\"orbofint\",\"orbofsc\",\"orbofstr\",\"rabbitsfoot\",\"talkingskull\",\"t2quiver\",\"lantern\",\"mshield\",\"quiver\",\"sshield\",\"xshield\",\"angelwings\",\"bcape\",\"cape\",\"ecape\",\"stealthcape\",\"hboots\",\"mrnboots\",\"mwboots\",\"shoes1\",\"wingedboots\",\"xboots\",\"hpants\",\"mrnpants\",\"mwpants\",\"pants1\",\"starkillers\",\"xpants\",\"cdragon\",\"coat1\",\"harmor\",\"mcape\",\"mrnarmor\",\"mwarmor\",\"tshirt0\",\"tshirt1\",\"tshirt2\",\"tshirt3\",\"tshirt4\",\"tshirt6\",\"tshirt7\",\"tshirt8\",\"tshirt88\",\"tshirt9\",\"warpvest\",\"xarmor\",\"eears\",\"fury\",\"helmet1\",\"hhelmet\",\"mrnhat\",\"mwhelmet\",\"partyhat\",\"rednose\",\"xhelmet\",\"gloves1\",\"goldenpowerglove\",\"handofmidas\",\"hgloves\",\"mrngloves\",\"mwgloves\",\"poker\",\"powerglove\",\"xgloves\",\"basher\",\"bataxe\",\"bowofthedead\",\"candycanesword\",\"carrotsword\",\"crossbow\",\"dartgun\",\"firebow\",\"frostbow\",\"froststaff\",\"gbow\",\"harbringer\",\"hbow\",\"merry\",\"oozingterror\",\"ornamentstaff\",\"pmace\",\"t2bow\",\"t3bow\",\"wblade\",\"ascale\",\"bfur\",\"cscale\",\"electronics\",\"feather0\",\"fireblade\",\"goldenegg\",\"goldingot\",\"goldnugget\",\"leather\",\"networkcard\",\"platinumingot\",\"platinumnugget\",\"pleather\",\"snakefang\",\"x0\",\"x1\",\"x2\",\"x3\",\"x4\",\"x5\",\"x6\",\"x7\",\"x8\",\"egg0\",\"egg1\",\"egg2\",\"egg3\",\"egg4\",\"egg5\",\"egg6\",\"egg7\",\"egg8\",\"essenceofether\",\"essenceoffire\",\"essenceoffrost\",\"essenceoflife\",\"essenceofnature\",\"bunnyelixir\",\"candypop\",\"elixirdex0\",\"elixirdex1\",\"elixirdex2\",\"elixirint0\",\"elixirint1\",\"elixirint2\",\"elixirluck\",\"elixirstr0\",\"elixirstr1\",\"elixirstr2\",\"greenbomb\",\"hotchocolate\",\"cscroll3\",\"scroll3\",\"scroll4\",\"bottleofxp\",\"bugbountybox\",\"monstertoken\",\"poison\",\"snakeoil\"]),this.holdPosition=!1,this.holdAttack=!1}async mainLoop(){setTimeout(async()=>{loot(),this.attackLoop(),this.mainLoop()},Math.max(250,parent.character.ping))}async run(){this.mainLoop()}async lootSetup(){parent.socket.on(\"drop\",t=>{parent.socket.emit(\"open_chest\",{id:t.id})})}async infoSetup(){game.on(\"hit\",t=>{if(!t.kill)return;const e=parent.entities[t.target];if(e&&e.mtype&&[\"fvampire\",\"greenjr\",\"jr\",\"mvampire\"].includes(e.mtype)&&G.monsters[e.mtype].respawn&&G.monsters[e.mtype].respawn>0){const t=2.2*G.monsters[e.mtype].respawn*1e3;console.info(`Setting respawn timer for ${e.mtype} for ${t}ms`),setTimeout(async()=>{const t=i();t[e.mtype]={id:\"-1\",lastSeen:new Date,map:e.map,x:e.real_x,y:e.real_y},s(t)},t)}})}async infoLoop(){const t=h();t[parent.character.name]={lastSeen:new Date,items:Object(n.g)(),attack:parent.character.attack,frequency:parent.character.frequency,goldm:parent.character.goldm,last_ms:parent.character.last_ms,luckm:parent.character.luckm,map:parent.character.map,x:parent.character.real_x,y:parent.character.real_y,s:parent.character.s},u(t);const e=f();let r=!1;for(const t of Object(n.f)({isPlayer:!0,isPartyMember:!1}))e[t.id]={lastSeen:new Date,rip:t.rip,map:t.map,x:t.real_x,y:t.real_y,s:t.s,ctype:t.ctype},r=!0;r&&l(e);const a=c();r=!1;for(const t of[\"Angel\",\"Kane\"])parent.entities[t]&&(a[t]={lastSeen:new Date,map:parent.entities[t].map,x:parent.entities[t].real_x,y:parent.entities[t].real_y},r=!0);r&&p(a);const o=i();r=!1;for(const t of Object(n.f)({isMonster:!0,isRIP:!1}))[\"fvampire\",\"goldenbat\",\"greenjr\",\"jr\",\"mvampire\",\"pinkgoo\",\"snowman\",\"wabbit\"].includes(t.mtype)&&(o[t.mtype]={lastSeen:new Date,id:t.id,x:t.real_x,y:t.real_y,map:t.map},r=!0);r&&s(o),setTimeout(()=>{this.infoLoop()},2e3)}getMonsterHuntTargets(){const t=[];let e=Number.MAX_VALUE;const r=h();for(const a of parent.party_list){const o=r[a];if(!o)continue;if(!o.s.monsterhunt||0==o.s.monsterhunt.c)continue;if(!this.targetPriority[o.s.monsterhunt.id])continue;const i=this.targetPriority[o.s.monsterhunt.id].coop;if(i){const t=Object(n.h)();if(i.filter(e=>!t.has(e)).length)continue}const s=o.s.monsterhunt.ms-(Date.now()-o.last_ms.getTime());s<e?(e=s,t.unshift(o.s.monsterhunt.id)):t.push(o.s.monsterhunt.id)}return t}shouldSwitchServer(){if(\"merchant\"==parent.character.ctype)return!0;if(!parent.character.s.monsterhunt)return!1;if(0==parent.character.s.monsterhunt.c)return!1;for(const t in parent.S)if(\"grinch\"!=t&&!(parent.S[t].hp/parent.S[t].max_hp>.9)&&parent.S[t].live&&this.targetPriority[t])return!1;return!0}async attackLoop(){if(!parent.character.rip&&!parent.character.moving){try{const t=get_nearest_monster({mtype:this.mainTarget});t&&can_attack(t)?(await attack(t),reduce_cooldown(\"attack\",parent.character.ping)):move(parent.character.x+(t.x-parent.character.x)/2,parent.character.y+(t.y-parent.character.y)/2)}catch(t){return\"cooldown\"==t.reason?void setTimeout(async()=>{this.attackLoop()},Math.min(...parent.pings)-t.remaining):([\"not_found\",\"disabled\"].includes(t.reason)||console.error(t),void setTimeout(async()=>{this.attackLoop()},Object(n.e)(\"attack\")))}setTimeout(async()=>{this.attackLoop()},Object(n.e)(\"attack\",!0))}}scareLoop(){try{const t=Object(n.f)({isAttackingUs:!0,isMonster:!0,isRIP:!1});let e=!1;if(t.length>=3)e=!0;else if(t.length&&parent.character.s.burned)e=!0;else if(t.length&&!this.targetPriority[t[0].mtype])e=!0;else if(parent.character.c.town&&(t.length>1||1==t.length&&distance(t[0],parent.character)-t[0].range-2*t[0].speed))e=!0;else for(const r of t)if(!(distance(r,parent.character)>r.range||6*Object(n.a)(r,parent.character)[1]*r.frequency<=parent.character.hp)){e=!0;break}if(!Object(n.k)(\"scare\")||!e)return void setTimeout(()=>{this.scareLoop()},Object(n.e)(\"scare\"));if(\"jacko\"==parent.character.slots.orb.name)use_skill(\"scare\"),reduce_cooldown(\"scare\",Math.min(...parent.pings));else{const t=Object(n.c)(\"jacko\");if(t.length){const e=t[0].index;equip(e),use_skill(\"scare\"),reduce_cooldown(\"scare\",Math.min(...parent.pings))}}}catch(t){console.error(t)}setTimeout(()=>{this.scareLoop()},Object(n.e)(\"scare\"))}getMovementLocation(t){if(!this.targetPriority[t])return;if(this.targetPriority[t].farmingPosition&&this.targetPriority[t].holdPositionFarm)return this.targetPriority[t].farmingPosition;if(Object(n.j)().has(t))return;if(this.targetPriority[t].farmingPosition)return distance(parent.character,this.targetPriority[t].farmingPosition)<parent.character.range?void 0:this.targetPriority[t].farmingPosition;if(parent.S[t]){if(!parent.S[t].live)return;return parent.S[t]}const e=Object(n.i)(t);return e||void 0}getMovementTarget(){if(parent.character.rip)return void set_message(\"RIP\");for(const t of Object(n.f)({isMonster:!0,isRIP:!1}))if([\"fvampire\",\"goldenbat\",\"greenjr\",\"jr\",\"mvampire\",\"phoenix\",\"pinkgoo\",\"snowman\",\"wabbit\"].includes(t.mtype)&&this.targetPriority[t.mtype])return set_message(t.mtype),{target:t.mtype,position:t,range:parent.character.range};const t=h(),e=i();for(const t in e){if(!this.targetPriority[t])continue;const r=e[t],a=this.targetPriority[t].coop;if(a){const t=Object(n.h)();if(a.filter(e=>!t.has(e)).length>0)continue}const o=parent.entities[r.id];if(o&&(r.x=o.real_x,r.y=o.real_y),!(distance(parent.character,r)<2*parent.character.range)||o)return set_message(\"SP \"+t),this.targetPriority[t].farmingPosition&&this.targetPriority[t].holdPositionFarm?{target:t,position:this.targetPriority[t].farmingPosition,range:parent.character.range}:{target:t,position:r,range:parent.character.range};delete e[t],s(e)}if(G.maps.main.ref.newyear_tree&&!parent.character.s.holidayspirit)return set_message(\"Xmas Tree\"),{target:\"newyear_tree\",position:G.maps.main.ref.newyear_tree,range:300};if(Object(n.l)())return set_message(\"Full!\"),{target:\"merchant\",position:{map:\"main\",x:60,y:-325},range:300};for(const t in parent.S)if(parent.S[t].live&&this.targetPriority[t])return set_message(t),{target:t,position:parent.S[t],range:parent.character.range};const r=this.getMonsterHuntTargets();for(const e of r){const r=this.targetPriority[e].coop;if(!r)return set_message(\"MH \"+e),{target:e,position:this.getMovementLocation(e)};{const n=new Set;for(const r of parent.party_list)t[r]&&t[r].monsterHuntTargets&&t[r].monsterHuntTargets[0]==e&&n.add(parent.party[r].type);if(0==r.filter(t=>!n.has(t)).length)return set_message(\"MH \"+e),{target:e,position:this.getMovementLocation(e)}}}const a=[];return this.nGraphMove.graph.forEachNode(t=>{a.push(t.id,t.data)}),this.mainTarget?(set_message(this.mainTarget),{target:this.mainTarget,position:this.getMovementLocation(this.mainTarget)}):void 0}async moveSetup(){try{const t=Date.now();this.nGraphMove=await x.getInstance(),console.info(`Took ${Date.now()-t}ms to prepare pathfinding.`),character.on(\"stacked\",()=>{console.info(`Scrambling ${parent.character.id} because we're stacked!`);const t=-25+Math.round(50*Math.random()),e=-25+Math.round(50*Math.random());move(parent.character.real_x+t,parent.character.real_y+e)})}catch(t){console.error(t)}}async healLoop(){try{if(parent.character.rip)return respawn(),void setTimeout(()=>{this.healLoop()},Object(n.e)(\"use_town\"));if(!Object(n.k)(\"use_hp\"))return void setTimeout(()=>{this.healLoop()},Object(n.e)(\"use_hp\"));const t=[\"hpot0\",\"hpot1\"],e=[\"mpot0\",\"mpot1\"];let r=null,a=null;for(let n=parent.character.items.length-1;n>=0;n--){const o=parent.character.items[n];if(o&&(!a&&t.includes(o.name)?a=o:!r&&e.includes(o.name)&&(r=o),a&&r))break}const o=parent.character.hp/parent.character.max_hp,i=parent.character.mp/parent.character.max_mp;o<=i&&1!=o&&(!a||\"hpot0\"==a.name&&(parent.character.hp<=parent.character.max_hp-200||parent.character.hp<50)||\"hpot1\"==a.name&&(parent.character.hp<=parent.character.max_hp-400||parent.character.hp<50))?(use_skill(\"use_hp\"),reduce_cooldown(\"use_hp\",Math.min(...parent.pings)),reduce_cooldown(\"use_mp\",Math.min(...parent.pings))):1!=i&&(!r||\"mpot0\"==r.name&&(parent.character.mp<=parent.character.max_mp-300||parent.character.mp<50)||\"mpot1\"==r.name&&(parent.character.mp<=parent.character.max_mp-500||parent.character.mp<50))?(use_skill(\"use_mp\"),reduce_cooldown(\"use_hp\",Math.min(...parent.pings)),reduce_cooldown(\"use_mp\",Math.min(...parent.pings))):o<i?(use_skill(\"regen_hp\"),reduce_cooldown(\"use_hp\",Math.min(...parent.pings)),reduce_cooldown(\"use_mp\",Math.min(...parent.pings))):i<o&&(use_skill(\"regen_mp\"),reduce_cooldown(\"use_hp\",Math.min(...parent.pings)),reduce_cooldown(\"use_mp\",Math.min(...parent.pings)))}catch(t){console.error(t)}setTimeout(()=>{this.healLoop()},Object(n.e)(\"use_hp\"))}getNewYearTreeBuff(){G.maps.main.ref.newyear_tree&&(parent.character.s.holidayspirit||distance(parent.character,G.maps.main.ref.newyear_tree)>400||parent.socket.emit(\"interaction\",{type:\"newyear_tree\"}))}getMonsterhuntQuest(){distance(parent.character,G.maps.main.ref.monsterhunter)>400||(parent.character.s.monsterhunt?0==parent.character.s.monsterhunt.c&&parent.socket.emit(\"monsterhunt\"):parent.socket.emit(\"monsterhunt\"))}parseCM(t,e){if(parent.party_list.includes(t)||parent.character.name==t||[\"earthiverse\",\"earthMag\",\"earthMag2\"].includes(t)||\"monster\"==e.message){if(\"info\"==e.message){const r=h();r[t]=e.info,u(r)}else if(\"monster\"==e.message){const t=i();t[e.id]=e.info,s(t)}else if(\"npc\"==e.message){const t=c();t[e.id]=e.info,p(t)}else if(\"player\"==e.message){const t=f();t[e.id]=e.info,l(t)}else if(\"chests\"==e.message)for(const t in e.chests)parent.chests[t]||(parent.chests[t]=e.chests[t])}else game_log(\"Blocked CM from \"+t)}equipBetterItems(){try{const t=Object(n.g)();if(this.movementTarget.target&&this.targetPriority[this.movementTarget.target])for(const e of this.targetPriority[this.movementTarget.target].equip||[]){let r=!1;for(const t in parent.character.slots){const n=parent.character.slots[t];if(n&&n.name==e){r=!0;break}}if(!r)for(const r of t)if(r.name==e){G.classes[parent.character.ctype].doublehand[G.items[e].wtype]&&unequip(\"offhand\"),equip(r.index);break}}for(const e in parent.character.slots){let r,n=parent.character.slots[e];if(n){for(const e of t)e.name==n.name&&(!e.level||e.level<=n.level||(n=e,r=e));r&&equip(r.index,e)}}}catch(t){console.error(t)}}wantToAttack(t,e=\"attack\"){if(!Object(n.k)(e))return!1;if(parent.character.c.town)return!1;let r=G.skills[e].range?G.skills[e].range:parent.character.range;const a=distance(parent.character,t);if(G.skills[e].range_multiplier&&(r*=G.skills[e].range_multiplier),a>r)return!1;const o=G.skills[e].mp?G.skills[e].mp:parent.character.mp_cost;if(parent.character.mp<o)return!1;if(\"attack\"!=e&&t.immune)return!1;if(\"attack\"!=e&&t[\"1hp\"])return!1;if(!is_pvp()&&\"monster\"==t.type&&!this.targetPriority[t.mtype])return!1;if(!t.target){if(this.holdAttack)return!1;if((smart.moving||this.nGraphMove.isMoving())&&this.movementTarget&&this.movementTarget.target&&this.movementTarget.target!=t.mtype&&this.targetPriority[t.mtype].holdAttackWhileMoving)return!1;if(this.targetPriority[t.mtype].holdAttackInEntityRange&&a<=t.range)return!1;if(this.targetPriority[t.mtype].coop){const e=[parent.character.ctype];for(const t of parent.party_list){const r=parent.entities[t];r&&(r.rip||\"priest\"==r.ctype&&distance(parent.character,r)>r.range||e.push(r.ctype))}for(const r of this.targetPriority[t.mtype].coop)if(!e.includes(r))return!1}if(parent.character.s.burned)return!1;if(5*Object(n.a)(t,parent.character)[1]*t.frequency>parent.character.hp&&(this.targetPriority[t.mtype].holdAttackInEntityRange||a<=t.range))return!1}return!0}}},function(t,e){t.exports=function(t){!function(t){if(!t)throw new Error(\"Eventify cannot use falsy object as events subject\");for(var e=[\"on\",\"fire\",\"off\"],r=0;r<e.length;++r)if(t.hasOwnProperty(e[r]))throw new Error(\"Subject cannot be eventified, since it already has property '\"+e[r]+\"'\")}(t);var e=function(t){var e=Object.create(null);return{on:function(r,n,a){if(\"function\"!=typeof n)throw new Error(\"callback is expected to be a function\");var o=e[r];return o||(o=e[r]=[]),o.push({callback:n,ctx:a}),t},off:function(r,n){if(void 0===r)return e=Object.create(null),t;if(e[r])if(\"function\"!=typeof n)delete e[r];else for(var a=e[r],o=0;o<a.length;++o)a[o].callback===n&&a.splice(o,1);return t},fire:function(r){var n,a=e[r];if(!a)return t;arguments.length>1&&(n=Array.prototype.splice.call(arguments,1));for(var o=0;o<a.length;++o){var i=a[o];i.callback.apply(i.ctx,n)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},function(t,e,r){t.exports=function(t,e){var r=(e=e||{}).oriented,o=e.heuristic;o||(o=i.heuristic);var p=e.distance;p||(p=i.distance);var h=a();return{find:function(e,a){var u=t.getNode(e);if(!u)throw new Error(\"fromId is not defined in this graph: \"+e);var f=t.getNode(a);if(!f)throw new Error(\"toId is not defined in this graph: \"+a);h.reset();var l,d=new Map,m=new n({compare:i.compareFScore,setNodeId:i.setHeapIndex}),g=h.createNewState(u);d.set(e,g),g.fScore=o(u,f),g.distanceToSource=0,m.push(g),g.open=1;for(;m.length>0;){if(l=m.pop(),y=f,l.node===y)return c(l);l.closed=!0,t.forEachLinkedNode(l.node.id,v,r)}var y;return s;function v(t,e){var r=d.get(t.id);if(r||(r=h.createNewState(t),d.set(t.id,r)),!r.closed){0===r.open&&(m.push(r),r.open=1);var n=l.distanceToSource+p(t,l.node,e);n>=r.distanceToSource||(r.parent=l,r.distanceToSource=n,r.fScore=n+o(r.node,f),m.updateItem(r.heapIndex))}}}}};var n=r(2),a=r(5),o=r(3),i=r(4),s=i.NO_PATH;function c(t){for(var e=[t.node],r=t.parent;r;)e.push(r.node),r=r.parent;return e}t.exports.l2=o.l2,t.exports.l1=o.l1},function(t,e,r){t.exports=function(t,e){var r=(e=e||{}).oriented,o=e.heuristic;o||(o=i.heuristic);var c=e.distance;c||(c=i.distance);var p=a();return{find:function(e,a){var h=t.getNode(e);if(!h)throw new Error(\"fromId is not defined in this graph: \"+e);var u=t.getNode(a);if(!u)throw new Error(\"toId is not defined in this graph: \"+a);if(h===u)return[h];p.reset();var f=r?function(t,e){if(1===w){if(e.fromId===k.node.id)return T(t,e,k)}else if(2===w&&e.toId===k.node.id)return T(t,e,k)}:function(t,e){return T(t,e,k)},l=new Map,d=new n({compare:i.compareFScore,setNodeId:i.setHeapIndex}),m=new n({compare:i.compareFScore,setNodeId:i.setHeapIndex}),g=p.createNewState(h);l.set(e,g),g.fScore=o(h,u),g.distanceToSource=0,d.push(g),g.open=1;var y=p.createNewState(u);y.fScore=o(u,h),y.distanceToSource=0,m.push(y),y.open=2;var v,_,x=Number.POSITIVE_INFINITY,b=d,w=1;for(;d.length>0&&m.length>0;){d.length<m.length?(w=1,b=d):(w=2,b=m);var k=b.pop();if(k.closed=!0,!(k.distanceToSource>x)&&(t.forEachLinkedNode(k.node.id,f),v&&_))return I(v,_)}return s;function I(t,e){for(var r=[],n=t;n;)r.push(n.node),n=n.parent;for(var a=e;a;)r.unshift(a.node),a=a.parent;return r}function T(t,e,r){var n=l.get(t.id);if(n||(n=p.createNewState(t),l.set(t.id,n)),!n.closed)if((i=n.open)&&i!==w){var a=n.distanceToSource+r.distanceToSource;a<x&&(v=n,_=r,x=a)}else{var i,s=r.distanceToSource+c(n.node,r.node,e);if(!(s>=n.distanceToSource)){var f=1===w?u:h,d=s+o(n.node,f);d>=x||(n.fScore=d,0===n.open&&(b.push(n),b.updateItem(n.heapIndex),n.open=w),n.parent=r,n.distanceToSource=s)}}}}}};var n=r(2),a=r(5),o=r(3),i=r(4),s=i.NO_PATH;t.exports.l2=o.l2,t.exports.l1=o.l1},function(t,e,r){t.exports=function(t,e){var r=(e=e||{}).oriented,a=e.quitFast,c=e.heuristic;c||(c=o.heuristic);var p=e.distance;p||(p=o.distance);var h=i();return{find:function(e,i){var u=t.getNode(e);if(!u)throw new Error(\"fromId is not defined in this graph: \"+e);var f=t.getNode(i);if(!f)throw new Error(\"toId is not defined in this graph: \"+i);h.reset();var l,d=r?function(t,e){if(e.fromId===k.node.id)return S(t,e)}:S,m=r?function(t,e){if(e.toId===k.node.id)return M(t,e)}:M,g=new Map,y=new n({compare:o.compareF1Score,setNodeId:o.setH1}),v=new n({compare:o.compareF2Score,setNodeId:o.setH2}),_=Number.POSITIVE_INFINITY,x=h.createNewState(u);g.set(e,x),x.g1=0;var b=c(u,f);x.f1=b,y.push(x);var w=h.createNewState(f);g.set(i,w),w.g2=0;var k,I=b;w.f2=I,v.push(w);for(;v.length&&y.length&&(y.length<v.length?T():N(),!a||!l););return function(t){if(!t)return s;var e=[t.node],r=t.p1;for(;r;)e.push(r.node),r=r.p1;var n=t.p2;for(;n;)e.unshift(n.node),n=n.p2;return e}(l);function T(){(k=y.pop()).closed||(k.closed=!0,k.f1<_&&k.g1+I-c(u,k.node)<_&&t.forEachLinkedNode(k.node.id,d),y.length>0&&(b=y.peek().f1))}function N(){(k=v.pop()).closed||(k.closed=!0,k.f2<_&&k.g2+b-c(k.node,f)<_&&t.forEachLinkedNode(k.node.id,m),v.length>0&&(I=v.peek().f2))}function S(t,e){var r=g.get(t.id);if(r||(r=h.createNewState(t),g.set(t.id,r)),!r.closed){var n=k.g1+p(k.node,t,e);n<r.g1&&(r.g1=n,r.f1=n+c(r.node,f),r.p1=k,r.h1<0?y.push(r):y.updateItem(r.h1));var a=r.g1+r.g2;a<_&&(_=a,l=r)}}function M(t,e){var r=g.get(t.id);if(r||(r=h.createNewState(t),g.set(t.id,r)),!r.closed){var n=k.g2+p(k.node,t,e);n<r.g2&&(r.g2=n,r.f2=n+c(u,r.node),r.p2=k,r.h2<0?v.push(r):v.updateItem(r.h2));var a=r.g1+r.g2;a<_&&(_=a,l=r)}}}}};var n=r(2),a=r(3),o=r(4),i=r(15),s=o.NO_PATH;t.exports.l2=a.l2,t.exports.l1=a.l1},function(t,e){function r(t){this.node=t,this.p1=null,this.p2=null,this.closed=!1,this.g1=Number.POSITIVE_INFINITY,this.g2=Number.POSITIVE_INFINITY,this.f1=Number.POSITIVE_INFINITY,this.f2=Number.POSITIVE_INFINITY,this.h1=-1,this.h2=-1}t.exports=function(){var t=0,e=[];return{createNewState:function(n){var a=e[t];a?(a.node=n,a.p1=null,a.p2=null,a.closed=!1,a.g1=Number.POSITIVE_INFINITY,a.g2=Number.POSITIVE_INFINITY,a.f1=Number.POSITIVE_INFINITY,a.f2=Number.POSITIVE_INFINITY,a.h1=-1,a.h2=-1):(a=new r(n),e[t]=a);return t++,a},reset:function(){t=0}}}},,,,,,function(t,e,r){\"use strict\";r.r(e),r.d(e,\"paladin\",(function(){return c}));var n=r(10),a=r(1),o=r(8),i=r(9);class s extends n.a{constructor(){super(),this.targetPriority=o.a,this.mainTarget=i.a,this.itemsToKeep.push(\"basher\",\"bataxe\",\"candycanesword\",\"carrotsword\",\"fireblade\",\"fsword\",\"sword\",\"swordofthedead\",\"wblade\",\"woodensword\",\"mshield\",\"shield\",\"sshield\",\"xshield\")}async run(){await super.run()}async mainLoop(){try{Object(a.c)(\"earthMer\",this.itemsToKeep),Object(a.b)(\"earthMer\",1e5),Object(a.a)(this.itemsToSell),await super.mainLoop()}catch(t){console.error(t),setTimeout(async()=>{this.mainLoop()},250)}}}const c=new s}]);","extractedComments":[]}